<div>
  @items.filter(function(i) { return i.position < item.position }).map(function(i) { return i.getTotal() }).reduce(function(lhs, rhs) { return lhs + rhs })
</div>

<code>
  <pre>
    function anonymous(_s) {
      var _b = [];
      with(_s) {
        _b.push("<div>\n  ");
        _b.push(items.filter(
            function(i) {
              return i.position < item.position 
            }
          ).
          map(
            function(i) {
              return i.getTotal() 
            }
          ).
          reduce(
            function(lhs, rhs) {
              return lhs + rhs 
            }
        ));
        _b.push("\n</div>");
      }
      return _b.join("");
    }
  </pre>
</code>